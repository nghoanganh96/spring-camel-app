<routes xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns="http://camel.apache.org/schema/spring"
        xsi:schemaLocation="http://camel.apache.org/schema/spring https://camel.apache.org/schema/spring/camel-spring.xsd">

    <!--    Spring-Jdbc component-->
    <route id="InsertCardInfo">
        <from uri="activemq-demo:queue:anhnh.test.message.request?asyncConsumer=true" />
        <log message="Request Body in InsertCardInfo: ${body}" />
        <process ref="insertRequestProcess" />
        <setHeader name="CamelRetrieveGeneratedKeys">
            <constant>true</constant>
        </setHeader>
        <log message="Request Body of insertResponseProcess: ${body}" />
        <to uri="spring-jdbc:dataSource"/>
        <process ref="insertResponseProcess" />
        <to uri="activemq-demo:queue:anhnh.test.message.response" />
    </route>

    <!--    Sql component: Insert -->
    <route id="InsertCardInfoSql">
        <from uri="activemq-demo:queue:anhnh.test.insert-sql.request?asyncConsumer=true" />
        <transacted ref="TX_REQUIRED"/>
        <log message="Request Body in InsertCardInfo-Sql: ${body}" />
        <process ref="insertSqlRequestProcess" />
        <log message="Request Body of insertSqlRequestProcess: ${body}" />
        <to uri="sql:INSERT INTO CARD_INFORMATION(CIF_ID, CUST_NAME, CARD_NUMBER, CARD_TYPE, UUID, CREATED_DATE, MODIFIED_DATE) VALUES(:#CIF_ID, :#CUST_NAME, :#CARD_NUMBER, :#CARD_TYPE, :#UUID, :#CREATED_DATE, :#MODIFIED_DATE)"/>
        <process ref="insertSqlResponseProcess" />
        <to uri="activemq-demo:queue:anhnh.test.insert-sql.response" />
    </route>

    <!--    Sql component: Update -->
    <route id="UpdateCardInfoSql">
        <from uri="direct:UpdateCardInfoSql" />
        <transacted ref="TX_REQUIRED"/>
        <process ref="sqlPreUpdateRequestProcess" />
        <log message="Request Body of preUpdateRequestProcess: ${body}" />
        <to uri="direct:FindOneCardInfoSql"/>
        <process ref="sqlUpdateRequestProcess" />
        <to uri="sql:INSERT INTO CARD_INFORMATION(CIF_ID, CUST_NAME, CARD_NUMBER, CARD_TYPE, UUID, CREATED_DATE, MODIFIED_DATE) VALUES(:#CIF_ID, :#CUST_NAME, :#CARD_NUMBER, :#CARD_TYPE, :#UUID, :#CREATED_DATE, :#MODIFIED_DATE)"/>
        <process ref="insertSqlResponseProcess" />
    </route>

    <!--    Sql component: Find One By Id -->
    <route id="FindOneCardInfoSql">
        <from uri="direct:FindOneCardInfoSql" />
        <process ref="sqlFindByIdRequestProcess" />
        <log message="Request Body of insertSqlRequestProcess: ${body}" />
        <to uri="sql:SELECT * FROM CARD_INFORMATION WHERE ID = :#VALUE"/>
        <process ref="sqlHandleListResponseProcess" />
        <process ref="sqlFindByIdResponseProcess" />
    </route>

    <!--    Spring-jdbc -->
    <route id="SelectAllCardInfo">
        <from uri="direct:selectAll" />
        <process ref="selectAllRequestProcess" />
        <log message="Request Body of selectAllRequestProcess: ${body}" />
        <to uri="spring-jdbc:dataSource"/>
        <log message="Response Body of selectAllRequestProcess: ${body}" />
        <process ref="handleListResponseProcess" />
        <log message="Response Body of handleListResponseProcess: ${body}" />
    </route>

    <!--    Spring-jdbc -->
    <route id="SelectByIdCardInfo">
        <from uri="direct:selectById" />
        <process ref="findByIdRequestProcess" />
        <log message="Request Body of SelectByIdCardInfo: ${body}" />
        <to uri="spring-jdbc:dataSource"/>
        <log message="Response Body of selectByIdRequestProcess: ${body}" />
        <process ref="handleListResponseProcess" />
        <process ref="findByIdResponseProcess" />
    </route>

    <!--    Spring-jdbc component: Update -->
    <route id="UpdateCardInfo">
        <from uri="direct:updateCardInfo" />
        <process ref="preUpdateRequestProcess" />
        <log message="Request Body of preUpdateRequestProcess: ${body}" />
        <to uri="direct:selectById"/>
        <process ref="updateRequestProcess" />
        <to uri="spring-jdbc:dataSource"/>
        <process ref="updateResponseProcess" />
    </route>

    <!--    Spring-jdbc component: Delete -->
    <route id="DeleteCardInfo">
        <from uri="direct:deleteCardInfo" />
        <log message="Request Body of DeleteCardInfo: ${body}" />
        <to uri="direct:selectById"/>
        <process ref="deleteRequestProcess" />
        <to uri="spring-jdbc:dataSource"/>
    </route>

</routes>